<h2>Todas as Tarefas:</h2>

<div class="filters">
  <a href="/tasks?filter=all" class="filter-btn {{#if (eq filter 'all')}}active{{/if}}">
    📋 Todas
  </a>
  <a href="/tasks?filter=pending" class="filter-btn {{#if (eq filter 'pending')}}active{{/if}}">
    🕗 Pendentes
  </a>
  <a href="/tasks?filter=completed" class="filter-btn {{#if (eq filter 'completed')}}active{{/if}}">
    ✅ Concluídas
  </a>
</div>

{{#if tasks.length}}
  <ul>
    {{#each tasks}}
      <li class="priority-{{#if (eq this.priority 'Baixa')}}baixa{{else}}{{#if (eq this.priority 'Média')}}media{{else}}alta{{/if}}{{/if}}">
        <div>
          <b style="font-size: 1.2em;">{{this.title}}</b>
          <span class="priority-badge {{#if (eq this.priority 'Baixa')}}baixa{{else}}{{#if (eq this.priority 'Média')}}media{{else}}alta{{/if}}{{/if}}">
            {{this.priority}}
          </span>
        </div>
        
        {{#if this.description}}
          <div style="color: #666;">{{this.description}}</div>
        {{/if}}
        
        {{#if this.dueDate}}
          <div class="due-date {{#if (isOverdue this.dueDate this.done)}}overdue{{/if}}">
            📅 Entrega: {{formatDate this.dueDate}}
            {{#if (isOverdue this.dueDate this.done)}}
              ⚠️ ATRASADA!
            {{/if}}
          </div>
        {{/if}}
        
        <div class="task-status {{#if this.done}}done{{else}}pending{{/if}}">
          {{#if this.done}}
            ✅ Concluída
          {{else}}
            🕗 Pendente
          {{/if}}
        </div>
        
        <div class="task-actions">
          <a href="/tasks/edit/{{this.id}}" class="btn-action btn-edit">✏️ Editar</a>
          <form style="display:inline; margin: 0;" method="post" action="/tasks/delete">
            <input type="hidden" name="id" value="{{this.id}}" />
            <button type="submit" class="btn-action btn-delete">🗑️ Excluir</button>
          </form>
        </div>
      </li>
    {{/each}}
  </ul>
{{else}}
  <p>🎉 Nenhuma tarefa cadastrada. Que tal criar uma nova?</p>
{{/if}}